<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_form_res_config_amazon_seller" model="ir.ui.view">
            <field name="name">Configure Seller</field>
            <field name="model">res.config.amazon.seller</field>
            <field name="groups_id" eval="[(6,0, [ref('base.group_multi_company')])]"/>
            <field name="arch" type="xml">
                <form string="Configure Seller" class="oe_form_configuration">
                    <group string="Developer Info">
                        <group>
                            <field name="country_id"
                                   domain="[('amazon_marketplace_code','!=',False)]"
                                   widget="selection"/>
                            <field name="developer_id" options="{'no_create': True}"
                                   attrs="{'invisible':[('developer_id','=',False)]}"/>
                        </group>
                        <group>
                            <field name="developer_name" readonly="1"
                                   attrs="{'invisible':[('developer_id','=',False)]}"/>
                        </group>
                    </group>


                    <group string="Seller Info">
                        <group>
                            <field name="name" required="1"/>
                        </group>
                        <group>
                            <field name="access_key" invisible="1"/>
                            <field name="amazon_selling" required="1"/>
                        </group>

                        <group>
                            <field name="secret_key" invisible="1"/>
                            <field name="country_id"
                                   domain="[('amazon_marketplace_code','!=',False)]"
                                   widget="selection"/>
                        </group>

                        <group attrs="{'invisible':[('developer_id','=',False)]}">
                            <field name="auth_token"
                                   attrs="{'required':[('developer_id','!=',False)]}"/>
                        </group>

                        <group attrs="{'invisible':[('developer_id','=',False)]}">
                            <field name="merchant_id"
                                   attrs="{'required':[('developer_id','!=',False)]}"/>
                        </group>

                    </group>
                    <footer>
                        <button string="Create" type="object" name="test_amazon_connection"
                                class="oe_highlight"/>
                        or
                        <button string="Cancel" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- added by Dhruvi [11-08-2018] view for amazon marketplace wizard -->
        <record id="view_form_res_config_amazon_marketplace" model="ir.ui.view">
            <field name="name">view.form.res.config.amazon.marketplace</field>
            <field name="model">res.config.amazon.marketplace</field>
            <field name="groups_id" eval="[(6,0, [ref('base.group_multi_company')])]"/>
            <field name="arch" type="xml">
                <form string="Configure Amazon Marketplaces" class="oe_form_configuration">
                    <group>
                        <field name="seller_id" widget="selection" class="oe_inline"
                               readonly="1" force_save="1"></field>
                        <field name="marketplace_ids" widget='many2many_checkboxes'
                               domain="[('seller_id','=',seller_id)]"></field>
                        <field name="is_pan_european_program_activated"
                               invisible="context.get('amazon_selling') == 'FBM'"></field>
                    </group>
                    <footer>
                        <button string="Create Marketplace" type="object"
                                name="create_amazon_marketplace" class="oe_highlight"/>
                        or
                        <button string="Cancel" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <record id="res_config_action_amazon_seller" model="ir.actions.act_window">
            <field name="name">Seller</field>
            <field name="res_model">res.config.amazon.seller</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="target">new</field>
            <field name="view_id" ref="view_form_res_config_amazon_seller"/>
        </record>


        <!-- added by Dhruvi [11-08-2018 action for selecting multiple marketplace
            wizard] -->
        <record id="res_config_action_amazon_marketplace" model="ir.actions.act_window">
            <field name="name">Amazon Marketplaces</field>
            <field name="res_model">res.config.amazon.marketplace</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="target">new</field>
            <field name="view_id" ref="view_form_res_config_amazon_marketplace"/>
        </record>

        <!-- Added to display transaction type in configurations -->
        <record id="view_config_amazon_transaction_type" model="ir.ui.view">
            <field name="name">Configure Amazon Seller Transaction Type</field>
            <field name="model">amazon.seller.ept</field>
            <field name="priority">1000</field>
            <field name="arch" type="xml">
                <form string="Configure Amazon Transaction Type">
                    <group>
                        <field name='transaction_line_ids' nolabel="1">
                            <tree string='Transaction' editable="top">
                                <field name='transaction_type_id' required="1"/>
                                <field name='account_id' required="1"/>
                                <field name="tax_id"/>
                            </tree>
                        </field>
                    </group>

                </form>
            </field>
        </record>

        <record id="res_config_action_amazon_transaction_type" model="ir.actions.act_window">
            <field name="name">Amazon Transaction Type</field>
            <field name="res_model">amazon.seller.ept</field>
            <field name="view_id" ref="amazon_ept.view_config_amazon_transaction_type"/>
        </record>


        <record id="view_amazon_config_settings" model="ir.ui.view">
            <field name="name">Amazon Settings</field>
            <field name="model">res.config.settings</field>
            <field name="inherit_id" ref="base.res_config_settings_view_form"/>
            <field name="groups_id" eval="[(4, ref('amazon_ept.group_amazon_user_ept'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('settings')]" position="inside">
                    <div class="app_settings_block " data-string="Amazon Seller"
                         data-key="amazon_ept">

                        <div name="seller_config">
                            <h2 style="font-size:25px;background-color:rgb(245,255,250);">Amazon
                                Seller - setup &amp;
                                configuration
                            </h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <h3 style="margin-left:-7px">
                                        <button style="font-size: 1.40833333rem;"
                                                string="1) Register Your Seller ID"
                                                name="register_seller" type="object"
                                                class="font-weight-bold oe_link"/>
                                    </h3>
                                </div>
                                <div class="col-xs-12 col-md-12 o_setting_box mt-0">
                                    <h3 style="margin-left:-7px">
                                        <button style="font-size: 1.40833333rem;"
                                                string="2) Connect Your Seller Central Account"
                                                name="%(res_config_action_amazon_seller)d"
                                                type="action"
                                                class="font-weight-bold oe_link"/>
                                    </h3>
                                    <h3 style="margin-left:21px;">
                                        <label for="amz_seller_id" string="Select Seller"/>
                                        <field name="amz_seller_id" widget="selection"
                                               class="oe_inline"/>
                                    </h3>
                                    <span style="margin-left:-7px">
                                        <button string="Add More Marketplace to Integrate"
                                                name="create_more_amazon_marketplace" type="object"
                                                class="oe_link"
                                                context="{'default_amz_seller_id':amz_seller_id}"
                                                attrs="{'invisible':[('amz_seller_id','=',False)]}"/>
                                    </span>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <group>
                                        <field name="amazon_selling"
                                               attrs="{'invisible':[('amz_seller_id','=',False)], 'required': [('amz_seller_id', '!=', False)]}"/>
                                    </group>
                                </div>
                            </div>
                        </div>


                        <div name="shipment_fee"
                             attrs="{'invisible': [('amz_seller_id', '=', False)]}">
                            <h2>Shipment and Other Fees</h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_shipment_charge_product_id"/>
                                            <field name="amz_shipment_charge_product_id"
                                                   class="oe_inline"
                                                   attrs="{'required':[('amz_seller_id','!=',False)]}"/>
                                            <div class="text-muted">
                                                Product to be select for Shipment Fee Order
                                                Line in an Order
                                            </div>
                                        </div>
                                        <div>
                                            <label for="amz_gift_wrapper_product_id"/>
                                            <field name="amz_gift_wrapper_product_id"
                                                   class="oe_inline"
                                                   attrs="{'required':[('amz_seller_id','!=',False)]}"/>
                                            <div class="text-muted">
                                                Product to be select for Gift Wrapper Fee
                                                Order Line in an Order
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_promotion_discount_product_id"/>
                                            <field name="amz_promotion_discount_product_id"
                                                   class="oe_inline"
                                                   attrs="{'required':[('amz_seller_id','!=',False)]}"/>
                                            <div class="text-muted">
                                                Product to be select for Promotion Discount
                                                Order Line in an Order
                                            </div>
                                        </div>
                                        <div>
                                            <label for="amz_ship_discount_product_id"/>
                                            <field name="amz_ship_discount_product_id"
                                                   class="oe_inline"
                                                   attrs="{'required':[('amz_seller_id','!=',False)]}"/>
                                            <div class="text-muted">
                                                Product to be select for Shipment Discount
                                                Order Line in an Order
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="products" attrs="{'invisible': [('amz_seller_id', '=', False)]}">
                            <h2>Products and Other Configurations</h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="amz_create_new_product"
                                               help="If true then system will allow to create new product if not found in odoo"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="amz_create_new_product"
                                               string="Allow to Create New Product if not found in Odoo ?"/>
                                        <div class="text-muted">
                                            If true then system will auto create product while
                                            importing orders.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_payment_term_id"/>
                                            <field name="amz_payment_term_id"
                                                   attrs="{'required':[('amz_seller_id','!=',False)]}"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                                Payment term to be select in order
                                            </div>
                                        </div>
                                        <div invisible="1">
                                            <label for="company_for_amazon_id"/>
                                            <field name="company_for_amazon_id"
                                                   widget="selection"
                                                   class="oe_inline"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="fbm"
                             attrs="{'invisible': ['|',  ('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBA')]}">
                            <center>
                                <h1 style="
                                background-color: #abadae;
                                font-size: 20px;
                                font-weight: bold;
                                color:#444;
                                font-family:arial;
                                ">FBM
                                </h1>
                            </center>
                        </div>

                        <div name="fbm_orders"
                             attrs="{'invisible': ['|',('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBA')]}">
                            <h2>FBM Orders and Returns</h2>
                            <div name="fbm_orders_returns">
                                <div class="row mt16 o_settings_container" name="FBA">
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="is_default_odoo_sequence_in_sales_order_fbm"
                                                   class="oe_inline"/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="is_default_odoo_sequence_in_sales_order_fbm"/>
                                            <div class="text-muted">
                                                Set Order Number based on default Sale Order
                                                Sequence
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <div attrs="{'invisible': [('is_default_odoo_sequence_in_sales_order_fbm', '=',True)]}">
                                                <label for="amz_order_prefix"/>
                                                <field name="amz_order_prefix" class="oe_inline"/>
                                                <div class="text-muted">
                                                    Prefix to add to Amazon Order Number
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="amz_import_shipped_fbm_orders"
                                                   help="If Ticked, Shipped FBM Orders will be Imported by system from Amazon."/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="amz_import_shipped_fbm_orders"/>
                                            <div class="text-muted">
                                                Get and Process FBM Shipped Orders from
                                                Amazon?
                                            </div>

                                            <div
                                                    attrs="{'invisible': [('amz_import_shipped_fbm_orders', '=',False)],'required': [('amz_import_shipped_fbm_orders', '=', True)]}">
                                                <label for="amz_import_shipped_fbm_orders_date"/>
                                                <field name="amz_import_shipped_fbm_orders_date"
                                                       class="oe_inline"/>
                                                <div class="text-muted">
                                                    Import Shipped FBM Orders with After this
                                                    Date
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="amz_auto_create_refund" class="oe_inline"/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="amz_auto_create_refund"/>
                                            <div class="text-muted">
                                                Create Credit Note or not when validate FBM
                                                Refund
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <div>
                                                <label for="amz_last_import_fbm_order_days"/>
                                                <field name="amz_last_import_fbm_order_days"
                                                       class="oe_inline"/>
                                                <div style="color:rgb(124, 123, 173);">
                                                    Note: As per Amazon documentation, It does
                                                    not guarantee that all the orders will be
                                                    returned between a
                                                    given Date range. Sometimes it will miss some
                                                    Orders to be
                                                    returned,so to resolve this mistake we will
                                                    check last
                                                    Order import time - days (give in this field).
                                                    By doing this you will get exact total Orders.
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <label for="amz_auto_workflow_id"
                                                   string="Auto Workflow"/>
                                            <field name="amz_auto_workflow_id"
                                                   attrs="{'required':['&amp;',('amz_seller_id','!=',False),('amazon_selling', '=', 'FBM')]}"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                                Automized order flow for Fullfillment by
                                                Merchant orders
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="inventory"
                             attrs="{'invisible': ['|', ('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBA')]}">
                            <h2>Inventory</h2>
                            <div name="fbm_inventory">
                                <div class="row mt16 o_settings_container" name="returns">
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <label for="amz_fulfillment_latency"/>
                                            <field name="amz_fulfillment_latency"
                                                   attrs="{'required':[('amz_seller_id','!=',False)]}"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="fba"
                             attrs="{'invisible': ['|',  ('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBM')]}">
                            <center>
                                <h1 style="
                                background-color: #abadae;
                                font-size: 20px;
                                font-weight: bold;
                                color:#444;">
                                    FBA
                                </h1>
                            </center>
                        </div>
                        <div name="fba_orders"
                             attrs="{'invisible': ['|' ,('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBM')]}">
                            <h2>FBA Orders</h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="amz_is_another_soft_create_fba_shipment"
                                               class="oe_inline"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="amz_is_another_soft_create_fba_shipment"/>
                                        <div class="text-muted">
                                            If true then system will not request new shipment
                                            reports, but get reports
                                            which was requested by another system or software.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <label for="amz_fba_auto_workflow_id"
                                               string="FBA Workflow"/>
                                        <field name="amz_fba_auto_workflow_id"
                                               class="oe_inline"
                                               attrs="{'required': ['&amp;',('amz_seller_id', '!=', False),('amazon_selling', '=', 'FBA')]}"/>
                                        <div class="text-muted">
                                            Automized order flow for Fullfillment by Amazon
                                            orders
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box"
                                     attrs="{'invisible': [('amazon_selling', '=', 'FBM')]}">
                                    <div class="o_setting_left_pane">
                                        <field name="amz_is_default_odoo_sequence_in_sales_order_fba"
                                               class="oe_inline"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="amz_is_default_odoo_sequence_in_sales_order_fba"/>
                                        <div class="text-muted">
                                            Set Order Number based on default Sale Order Sequence
                                        </div>
                                    </div>
                                    <br/>
                                    <div class="o_setting_right_pane">
                                        <label for="amz_def_fba_partner_id"/>
                                        <field name="amz_def_fba_partner_id"
                                               attrs="{'required':['&amp;', ('amz_seller_id','!=',False), ('amazon_selling', '!=', 'FBM')]}"
                                               class="oe_inline"/>
                                        <div class="text-muted">
                                            Customer to be set in quotation for FBA pending orders
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div
                                                attrs="{'invisible': [('amz_is_default_odoo_sequence_in_sales_order_fba', '=',True)]}">
                                            <label for="amz_fba_order_prefix"/>
                                            <field name="amz_fba_order_prefix" class="oe_inline"/>
                                            <div class="text-muted">
                                                Prefix to add to Amazon Order Number
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="inventory"
                             attrs="{'invisible': ['|', ('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBM')]}">
                            <h2>Inventory</h2>
                            <div name="fbm_inventory">
                                <div class="row mt16 o_settings_container" name="fbm_inv">
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="amz_validate_stock_inventory_for_report"
                                                   class="oe_inline"
                                                   help="If Ticked, Product Stock will be automatically validated by system."/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="amz_validate_stock_inventory_for_report"/>
                                            <div class="text-muted">
                                                Adjust stock in Odoo based on Live Inventory Report
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="amz_is_reserved_qty_included_inventory_report"
                                                   class="oe_inline"
                                                   help="If Ticked, Reserved Quantity will be added to the fulfillment Quantity."/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="amz_is_reserved_qty_included_inventory_report"
                                                   string="Is Reserved Qyantity to be included FBA Live Inventory Report?"/>
                                            <div class="text-muted">
                                                If true them system will include FBA reserve stock
                                                into real stock.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_left_pane">
                                            <field name="amz_is_another_soft_create_fba_inventory"
                                                   class="oe_inline"/>
                                        </div>
                                        <div class="o_setting_right_pane">
                                            <label for="amz_is_another_soft_create_fba_inventory"/>
                                            <div class="text-muted">
                                                If true then system will not request new Inventory
                                                reports, but get
                                                reports which was requested by another system or
                                                software.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="removal_order_for_seller"
                             attrs="{'invisible': ['|' ,('amz_seller_id', '=', False), ('amazon_selling', '=', 'FBM')]}">
                            <h2>Removal Order</h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box"
                                     attrs="{'invisible': [('amz_seller_id', '=', False)]}">
                                    <div class="o_setting_left_pane">
                                        <field name="is_global_warehouse_in_fba" class="oe_inline"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="is_global_warehouse_in_fba"/>
                                        <div class="text-muted">
                                            If true then you have to set warehouse, and you can
                                            select warehouse for
                                            only
                                            one instance.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box"
                                     attrs="{'invisible': [('is_global_warehouse_in_fba','=',False)]}">
                                    <div class="o_setting_right_pane">
                                        <label for="amz_instance_removal_order"/>
                                        <field name="amz_instance_removal_order" class="oe_inline"
                                               attrs="{'required':[('is_global_warehouse_in_fba','=',True)]}"
                                               domain="[('seller_id','=',amz_seller_id)]"/>
                                        <div class="text-muted">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-12 col-md-6 o_setting_box"
                                     attrs="{'invisible': ['|','|', ('amz_seller_id', '=', False), ('is_global_warehouse_in_fba','=',False), ('amz_instance_removal_order','=',False)]}">
                                    <div class="o_setting_right_pane">
                                        <label for="removal_warehouse_id"/>
                                        <field name="removal_warehouse_id" class="oe_inline"
                                               attrs="{'required':[('is_global_warehouse_in_fba','=',True)]}"
                                               domain="[('is_fba_warehouse','=',False)]"/>
                                        <div class="text-muted">
                                            Warehouse in which amazon shipment will be received
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="settlement_report"
                             attrs="{'invisible': [('amz_seller_id', '=', False)]}">
                            <h2>Settlement Report Setting</h2>
                            <div name="fba_settlement_report">
                                <div class="row mt16 o_settings_container" name="returns">
                                    <div class="col-xs-12 col-md-6 o_setting_box"
                                         attrs="{'invisible': [('amazon_selling', '=', 'FBM')]}">
                                        <div class="o_setting_right_pane">
                                            <label for="amz_reimbursement_customer_id"
                                                   string="Customer"/>
                                            <field name="amz_reimbursement_customer_id"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 col-md-6 o_setting_box"
                                         attrs="{'invisible': [('amazon_selling', '=', 'FBM')]}">
                                        <div class="o_setting_right_pane">
                                            <label for="amz_sales_journal_id"
                                                   string="Sales Journal"/>
                                            <field name="amz_sales_journal_id"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 col-md-6 o_setting_box"
                                         attrs="{'invisible': [('amazon_selling', '=', 'FBM')]}">
                                        <div class="o_setting_right_pane">
                                            <label for="amz_reimbursement_product_id"/>
                                            <field name="amz_reimbursement_product_id"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 col-md-6 o_setting_box">
                                        <div class="o_setting_right_pane">
                                            <span>
                                                <button string="Configure Amazon Seller Transaction Type"
                                                        name="create_amazon_seller_transaction_type"
                                                        type="object"
                                                        class="oe_link"
                                                        context="{'default_amz_seller_id':amz_seller_id}"
                                                        attrs="{'invisible':[('amz_seller_id','=',False)]}"/>
                                            </span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>


                    </div>
                </xpath>
            </field>
        </record>

        <record id="view_amazon_instance_config_settings" model="ir.ui.view">
            <field name="name">Amazon Settings</field>
            <field name="model">res.config.settings</field>
            <field name="inherit_id" ref="base.res_config_settings_view_form"/>
            <field name="groups_id" eval="[(4, ref('amazon_ept.group_amazon_user_ept'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('settings')]" position="inside">
                    <div class="app_settings_block " data-string="Amazon Marketplace"
                         data-key="amazon_ept_instance">

                        <div name="seller_config">
                            <h2 style="font-size:25px;background-color:rgb(245,255,250);">Amazon
                                Seller
                            </h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <label for="amz_seller_id"
                                           string="Select Seller"/><!-- on_change="onchange_seller_id(seller_id,instance_id,product_ads_account)" -->
                                    <field name="amz_seller_id" widget="selection"
                                           class="oe_inline"/>

                                </div>
                            </div>
                        </div>
                        <div name="amazon_instance"
                             attrs="{'invisible': [('amz_seller_id', '=', False)]}">
                            <h2 style="font-size:25px;background-color:rgb(245,255,250);">Amazon
                                Marketplace
                            </h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <label for="amz_instance_id" string="Select Marketplace"/><!--
                                        on_change="onchange_instance_id(instance_id,product_ads_account)" -->
                                    <field name="amz_instance_id" widget="selection"
                                           domain="[('seller_id','=',amz_seller_id)]"
                                           class="oe_inline"/>
                                </div>
                            </div>
                        </div>

                        <div name="amazon_instance_congif"
                             attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                            <h2 style="font-size:21px;background-color:rgb(245,255,250);">
                                Marketplace Configuration
                            </h2>
                        </div>

                        <div name="inventory_instance"
                             attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                            <h2>Inventory</h2>
                            <div name="inv" class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_instance_stock_field"/>
                                            <field name="amz_instance_stock_field"
                                                   attrs="{'required':[('amz_instance_id','!=',False)]}"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                                Updates Stock based on Stock On Hand or
                                                Forecast Quantity.
                                                Recommanded Forecast Quantity
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="payment_instance"
                             attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                            <h2>Settlement Report</h2>
                            <div class="row mt16 o_settings_container" name="payment">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_instance_settlement_report_journal_id"/>
                                            <field name="amz_instance_settlement_report_journal_id"
                                                   class="oe_inline"
                                                   domain="[('company_id','=',company_for_amazon_id),('type','in',['cash','bank'])]"/>
                                            <div class="text-muted">
                                                Creates Bank Statement using this journal
                                                while process Settlement
                                                Reprot
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_instance_ending_balance_account_id"/>
                                            <field name="amz_instance_ending_balance_account_id"
                                                   class="oe_inline"
                                                   domain="[('company_id','=',company_for_amazon_id)]"/>
                                            <div class="text-muted">
                                                Account to be used for transfer from Amazon to
                                                Bank account.
                                            </div>
                                        </div>
                                        <div attrs="{'invisible':[('amz_instance_ending_balance_account_id','=',False)]}">
                                            <label for="amz_instance_ending_balance_description"/>
                                            <field name="amz_instance_ending_balance_description"
                                                   class="oe_inline"
                                                   domain="[('company_id','=',parent.company_for_amazon_id)]"
                                                   attrs="{'required':[('amz_instance_ending_balance_account_id','!=',False)]}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="order_fulfillement"
                             attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                            <h2>Orders</h2>
                            <div class="row mt16 o_settings_container" name="order">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div name="miscllenous_instance">
                                            <div>
                                                <label for="amz_lang_id"/>
                                                <field name="amz_lang_id" widget="selection"
                                                       attrs="{'required':[('amz_instance_id','!=',False)]}"
                                                       class="oe_inline"/>
                                                <div class="text-muted">
                                                    Language to be set on Amazon customer to send
                                                    document in their
                                                    local language
                                                </div>
                                            </div>
                                            <div>
                                                <label for="amazon_property_account_payable_id"/>
                                                <field name="amazon_property_account_payable_id"
                                                       class="oe_inline"/>
                                                <div class="text-muted">
                                                    Set the payable account for current partner
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <div>
                                            <label for="amz_instance_pricelist_id"/>
                                            <field name="amz_instance_pricelist_id"
                                                   attrs="{'required':[('amz_instance_id','!=',False)]}"
                                                   class="oe_inline"/>
                                            <div class="text-muted">
                                                Will be used to update price for product on
                                                Amazon and Creates
                                                Order in Pricelist Currency
                                            </div>
                                        </div>
                                        <div invisible="1">
                                            <label for="amz_partner_id"/>
                                            <field name="amz_partner_id" class="oe_inline"/>
                                        </div>
                                        <div>
                                            <label for="amz_team_id"/>
                                            <field name="amz_team_id" widget="selection"
                                                   class="oe_inline"/>
                                        </div>
                                        <div>
                                            <label for="amazon_property_account_receivable_id"/>
                                            <field name="amazon_property_account_receivable_id"
                                                   class="oe_inline"/>
                                        </div>

                                        <!-- <div invisible="1"> <label for="company_for_amazon_id"/> <field
                                            name="company_for_amazon_id" widget="selection" class="oe_inline"/> </div> -->
                                    </div>
                                </div>

                                <div class="col-xs-12 col-md-6 o_setting_box"
                                     attrs="{'invisible': [('amazon_selling', '=', 'FBA')] }">
                                    <div class="o_setting_right_pane">

                                        <div>
                                            <label for="amz_warehouse_id" string="FBM Warehouse"/>
                                            <field name="amz_warehouse_id" widget="selection"
                                                   attrs="{'required':[('amz_instance_id','!=',False), ('amazon_selling', '!=', 'FBA')]}"
                                                   class="oe_inline"
                                                   domain="[('company_id','=',company_for_amazon_id),('is_fba_warehouse','=',False)]"/>


                                            <div class="text-muted">
                                                Fulfillment warehouse for FBM Orders.
                                                Calculate stock for FBM Products
                                                to update to Amazon
                                            </div>
                                        </div>
                                        <div>
                                            <field name="amz_country_id" invisible="1"
                                                   class="oe_inline"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-12 col-md-6 o_setting_box"
                                     attrs="{'invisible': [('amazon_selling', '=', 'FBM')]}">
                                    <div class="o_setting_right_pane">
                                        <label for="amz_def_fba_warehouse_id" string="FBA Warehouse"/>
                                        <field name="amz_def_fba_warehouse_id"
                                               domain="[('company_id','=',company_for_amazon_id),('is_fba_warehouse','=',True),('seller_id','=', amz_seller_id)]"
                                               attrs="{'required':['&amp;', ('amz_instance_id','!=',False), ('amazon_selling', '!=', 'FBM')]}"
                                               class="oe_inline" options="{'no_create': True, 'no_create_edit':True}"/>
                                        <div class="text-muted">
                                            Process FBA Orders in this warehouse if fulfillment center not found
                                        </div>
                                        <div invisible="1">
                                            <label for="company_for_amazon_id"/>
                                            <field name="company_for_amazon_id" widget="selection"
                                                   class="oe_inline"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="send_invoice_refund_template"
                             attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                            <h2>Send Invoice / Creidt Notes Template</h2>
                            <div class="row mt16 o_settings_container">
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <label for="amz_instance_invoice_tmpl_id"/>
                                        <field name="amz_instance_invoice_tmpl_id"/>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-md-6 o_setting_box">
                                    <div class="o_setting_right_pane">
                                        <label for="amz_instance_refund_tmpl_id"/>
                                        <field name="amz_instance_refund_tmpl_id"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div name="unsellable" attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                            <h2>Orders and Returns</h2>
                            <div class="row mt16 o_settings_container" name="unsellable_location"
                                 attrs="{'invisible': [('amz_instance_id', '=', False)]}">
                                <div class="col-xs-12 col-md-6 o_setting_box" name="unsellable">
                                    <div class="o_setting_right_pane">
                                        <label for="amz_unsellable_location_id"/>
                                        <field name="amz_unsellable_location_id" class="oe_inline"
                                               attrs="{'required':['&amp;', ('amz_def_fba_warehouse_id','!=',False),('amazon_selling', '!=', 'FBM')]}"
                                               domain="['|',('company_id','=',company_for_amazon_id),('company_id','=',False),('usage','=','internal')]"/>
                                        <div class="text-muted">
                                            Track unsallble products from customer return through this location
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </xpath>
            </field>
        </record>


        <record id="action_amazon_instance_config" model="ir.actions.act_window">
            <field name="name">Settings</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <!-- <field name="context">{'default_instance_id': active_id}</field> -->
            <field name="target">inline</field>
        </record>

        <menuitem id="amazon_instance_menu_item" name="Amazon"
                  web_icon="amazon_ept,static/description/icon.png"
                  groups="amazon_ept.group_amazon_fba_ept,amazon_ept.group_amazon_fbm_ept"
                  sequence="21"/>

        <menuitem id="menu_configuration_ept" parent="amazon_instance_menu_item"
                  sequence="20" name="Configuration" groups="amazon_ept.group_amazon_manager_ept"/>


        <record id="action_amazon_configuration" model="ir.actions.act_window">
            <field name="name">Settings</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_amazon_config_settings"/>
            <field name="target">inline</field>
            <field name="context">{'module' : 'amazon_ept'}</field>
        </record>

        <menuitem id="menu_config_amazon_setting" sequence="1"
                  name="Amazon Settings" parent="amazon_ept.menu_configuration_ept"
                  action="action_amazon_configuration" groups="base.group_system"/>

        <!--Added by Krushna-->
        <record model="ir.actions.server" id="action_buy_pack">
            <field name="name">Buy IAP Pack</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="base.model_res_config_settings"/>
            <field name="state">code</field>
            <field name="code">action = env['res.config.settings'].generate_buy_pack_url()</field>
        </record>

        <menuitem id="menu_buy_iap_pack" sequence="210"
                  name="Buy IAP Pack" parent="amazon_instance_menu_item"
                  action="action_buy_pack" groups="base.group_system"/>

    </data>
</odoo>



